<h1>View Source: /logd/prefs.php</h1><a href='#source'>Click here for the source,</a> OR<br><b>Other files that you may wish to view the source of:</b><ul><li><a href='source.php?url=/logd/about.php'>about.php</a></li>
<li><a href='source.php?url=/logd/armor.php'>armor.php</a></li>
<li><a href='source.php?url=/logd/armoreditor.php'>armoreditor.php</a></li>
<li><a href='source.php?url=/logd/badnav.php'>badnav.php</a></li>
<li><a href='source.php?url=/logd/bank.php'>bank.php</a></li>
<li><a href='source.php?url=/logd/battle.php'>battle.php</a></li>
<li><a href='source.php?url=/logd/bio.php'>bio.php</a></li>
<li><a href='source.php?url=/logd/common.php'>common.php</a></li>
<li><a href='source.php?url=/logd/configuration.php'>configuration.php</a></li>
<li><a href='source.php?url=/logd/connector.php'>connector.php</a></li>
<li><a href='source.php?url=/logd/create.php'>create.php</a></li>
<li><a href='source.php?url=/logd/creatures.php'>creatures.php</a></li>
<li>dbconnect.php &#151; this file cannot be viewed: it contains sensitive information specific to this installation.</li>
<li><a href='source.php?url=/logd/dbwrapper.php'>dbwrapper.php</a></li>
<li><a href='source.php?url=/logd/donators.php'>donators.php</a></li>
<li>dragon.php &#151; this file cannot be viewed: If you want to read the dragon script, I suggest you do so by defeating it!</li>
<li><a href='source.php?url=/logd/forest.php'>forest.php</a></li>
<li><a href='source.php?url=/logd/graveyard.php'>graveyard.php</a></li>
<li><a href='source.php?url=/logd/gypsy.php'>gypsy.php</a></li>
<li><a href='source.php?url=/logd/healer.php'>healer.php</a></li>
<li><a href='source.php?url=/logd/hof.php'>hof.php</a></li>
<li><a href='source.php?url=/logd/index.php'>index.php</a></li>
<li><a href='source.php?url=/logd/inn.php'>inn.php</a></li>
<li><a href='source.php?url=/logd/list.php'>list.php</a></li>
<li><a href='source.php?url=/logd/logdnet.php'>logdnet.php</a></li>
<li><a href='source.php?url=/logd/login.php'>login.php</a></li>
<li><a href='source.php?url=/logd/mail.php'>mail.php</a></li>
<li><a href='source.php?url=/logd/motd.php'>motd.php</a></li>
<li><a href='source.php?url=/logd/newday.php'>newday.php</a></li>
<li><a href='source.php?url=/logd/news.php'>news.php</a></li>
<li><a href='source.php?url=/logd/petition.php'>petition.php</a></li>
<li><a href='source.php?url=/logd/prefs.php'>prefs.php</a></li>
<li><a href='source.php?url=/logd/pvp.php'>pvp.php</a></li>
<li><a href='source.php?url=/logd/referers.php'>referers.php</a></li>
<li><a href='source.php?url=/logd/shades.php'>shades.php</a></li>
<li><a href='source.php?url=/logd/source.php'>source.php</a></li>
<li><a href='source.php?url=/logd/stables.php'>stables.php</a></li>
<li><a href='source.php?url=/logd/stats.php'>stats.php</a></li>
<li><a href='source.php?url=/logd/superuser.php'>superuser.php</a></li>
<li><a href='source.php?url=/logd/taunt.php'>taunt.php</a></li>
<li><a href='source.php?url=/logd/train.php'>train.php</a></li>
<li><a href='source.php?url=/logd/translator.php'>translator.php</a></li>
<li><a href='source.php?url=/logd/translator_de.php'>translator_de.php</a></li>
<li><a href='source.php?url=/logd/translator_dk.php'>translator_dk.php</a></li>
<li><a href='source.php?url=/logd/translator_en.php'>translator_en.php</a></li>
<li><a href='source.php?url=/logd/translator_es.php'>translator_es.php</a></li>
<li><a href='source.php?url=/logd/translator_fr.php'>translator_fr.php</a></li>
<li><a href='source.php?url=/logd/user.php'>user.php</a></li>
<li><a href='source.php?url=/logd/viewpetition.php'>viewpetition.php</a></li>
<li><a href='source.php?url=/logd/village.php'>village.php</a></li>
<li><a href='source.php?url=/logd/weaponeditor.php'>weaponeditor.php</a></li>
<li><a href='source.php?url=/logd/weapons.php'>weapons.php</a></li>
<li><a href='source.php?url=/logd/special/audrey.php'>special/audrey.php</a></li>
<li><a href='source.php?url=/logd/special/darkhorse.php'>special/darkhorse.php</a></li>
<li><a href='source.php?url=/logd/special/distress.php'>special/distress.php</a></li>
<li><a href='source.php?url=/logd/special/fairy1.php'>special/fairy1.php</a></li>
<li><a href='source.php?url=/logd/special/findgem.php'>special/findgem.php</a></li>
<li><a href='source.php?url=/logd/special/findgold.php'>special/findgold.php</a></li>
<li><a href='source.php?url=/logd/special/glowingstream.php'>special/glowingstream.php</a></li>
<li><a href='source.php?url=/logd/special/grassyfield.php'>special/grassyfield.php</a></li>
<li><a href='source.php?url=/logd/special/oldmanbet.php'>special/oldmanbet.php</a></li>
<li><a href='source.php?url=/logd/special/oldmanpretty.php'>special/oldmanpretty.php</a></li>
<li><a href='source.php?url=/logd/special/oldmantown.php'>special/oldmantown.php</a></li>
<li><a href='source.php?url=/logd/special/oldmanugly.php'>special/oldmanugly.php</a></li>
<li><a href='source.php?url=/logd/special/riddles.php'>special/riddles.php</a></li>
<li><a href='source.php?url=/logd/special/skillmaster.php'>special/skillmaster.php</a></li>
</ul><h1><a name='source'>Source of: /logd/prefs.php</a></h1><code><font color="#000000">
<font color="#0000BB">&lt;?<br /></font><font color="#007700">if (isset(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'template'</font><font color="#007700">])){<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">setcookie</font><font color="#007700">(</font><font color="#DD0000">"template"</font><font color="#007700">,</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'template'</font><font color="#007700">],</font><font color="#0000BB">strtotime</font><font color="#007700">(</font><font color="#DD0000">"+45 days"</font><font color="#007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$_COOKIE</font><font color="#007700">[</font><font color="#DD0000">'template'</font><font color="#007700">]=</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#DD0000">'template'</font><font color="#007700">];<br />}<br />require_once </font><font color="#DD0000">"common.php"</font><font color="#007700">;<br /></font><font color="#0000BB">page_header</font><font color="#007700">(</font><font color="#DD0000">"Preferences"</font><font color="#007700">);<br /></font><font color="#0000BB">checkday</font><font color="#007700">();<br />if (</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">alive</font><font color="#007700">]){<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Return to the village"</font><font color="#007700">,</font><font color="#DD0000">"village.php"</font><font color="#007700">);<br />}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Return to the news"</font><font color="#007700">,</font><font color="#DD0000">"news.php"</font><font color="#007700">);<br />}<br /><br />if (</font><font color="#0000BB">count</font><font color="#007700">(</font><font color="#0000BB">$_POST</font><font color="#007700">)==</font><font color="#0000BB">0</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$form</font><font color="#007700">=array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"Preferences,title"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">,</font><font color="#DD0000">"emailonmail"</font><font color="#007700">=&gt;</font><font color="#DD0000">"Send you an email when you get new Ye Olde Mail?,bool"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">,</font><font color="#DD0000">"systemmail"</font><font color="#007700">=&gt;</font><font color="#DD0000">"Include system generated messages (such as victorious when attacked)?,bool"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">,</font><font color="#DD0000">"dirtyemail"</font><font color="#007700">=&gt;</font><font color="#DD0000">"Leave Ye Olde Poste messages uncleaned (allow swear words in post to you)?,bool"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">,</font><font color="#DD0000">"language"</font><font color="#007700">=&gt;</font><font color="#DD0000">"Language (Not Yet Complete),enum,en,English,de,Deutsch,dk,Danish,es,Español"<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;form action='prefs.php?op=save' method='POST'&gt;"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$handle </font><font color="#007700">= </font><font color="#0000BB">opendir</font><font color="#007700">(</font><font color="#DD0000">"templates"</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$skins </font><font color="#007700">= array();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (</font><font color="#0000BB">false </font><font color="#007700">!== (</font><font color="#0000BB">$file </font><font color="#007700">= </font><font color="#0000BB">readdir</font><font color="#007700">(</font><font color="#0000BB">$handle</font><font color="#007700">))){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">strpos</font><font color="#007700">(</font><font color="#0000BB">$file</font><font color="#007700">,</font><font color="#DD0000">".htm"</font><font color="#007700">)&gt;</font><font color="#0000BB">0</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_push</font><font color="#007700">(</font><font color="#0000BB">$skins</font><font color="#007700">,</font><font color="#0000BB">$file</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">count</font><font color="#007700">(</font><font color="#0000BB">$skins</font><font color="#007700">)==</font><font color="#0000BB">0</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`b`@Aww, your administrator has decided you're not allowed to have any skins.&nbsp;&nbsp;Complain to them, not me."</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"&lt;b&gt;Skin:&lt;/b&gt;&lt;br&gt;"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (list(</font><font color="#0000BB">$key</font><font color="#007700">,</font><font color="#0000BB">$val</font><font color="#007700">)=</font><font color="#0000BB">each</font><font color="#007700">(</font><font color="#0000BB">$skins</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"&lt;input type='radio' name='template' value='$val'"</font><font color="#007700">.(</font><font color="#0000BB">$_COOKIE</font><font color="#007700">[</font><font color="#DD0000">'template'</font><font color="#007700">]==</font><font color="#DD0000">""</font><font color="#007700">&amp;&amp;</font><font color="#0000BB">$val</font><font color="#007700">==</font><font color="#DD0000">"yarbrough.htm" </font><font color="#007700">|| </font><font color="#0000BB">$_COOKIE</font><font color="#007700">[</font><font color="#DD0000">'template'</font><font color="#007700">]==</font><font color="#0000BB">$val</font><font color="#007700">?</font><font color="#DD0000">" checked"</font><font color="#007700">:</font><font color="#DD0000">""</font><font color="#007700">).</font><font color="#DD0000">"&gt;"</font><font color="#007700">.</font><font color="#0000BB">substr</font><font color="#007700">(</font><font color="#0000BB">$val</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">strpos</font><font color="#007700">(</font><font color="#0000BB">$val</font><font color="#007700">,</font><font color="#DD0000">".htm"</font><font color="#007700">)).</font><font color="#DD0000">"&lt;br&gt;"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`c`b`\$ERROR!!!`b`c`&amp;Unable to open the templates folder!&nbsp;&nbsp;Please notify the administrator!!"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"<br />&nbsp;&nbsp;&nbsp;&nbsp;New Password: &lt;input name='pass1' type='password'&gt; (leave blank if you don't want to change it)`n<br />&nbsp;&nbsp;&nbsp;&nbsp;Retype: &lt;input name='pass2' type='password'&gt;`n<br />&nbsp;&nbsp;&nbsp;&nbsp;Email address: &lt;input name='email' value=\""</font><font color="#007700">.</font><font color="#0000BB">HTMLEntities</font><font color="#007700">(</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">emailaddress</font><font color="#007700">]).</font><font color="#DD0000">"\"&gt;`n<br />&nbsp;&nbsp;&nbsp;&nbsp;"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">showform</font><font color="#007700">(</font><font color="#0000BB">$form</font><font color="#007700">,</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">prefs</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#DD0000">"prefs.php?op=save"</font><font color="#007700">);<br />}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">pass1</font><font color="#007700">]!=</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">pass2</font><font color="#007700">]){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`#Your passwords do not match.`n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">pass1</font><font color="#007700">]!=</font><font color="#DD0000">""</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">strlen</font><font color="#007700">(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">pass1</font><font color="#007700">])&gt;</font><font color="#0000BB">3</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">password</font><font color="#007700">]=</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">pass1</font><font color="#007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`#Your password has been changed.`n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`#Your password is too short.&nbsp;&nbsp;It must be at least 4 characters.`n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">reset</font><font color="#007700">(</font><font color="#0000BB">$_POST</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$nonsettings </font><font color="#007700">= array(</font><font color="#DD0000">"pass1"</font><font color="#007700">=&gt;</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#DD0000">"pass2"</font><font color="#007700">=&gt;</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#DD0000">"email"</font><font color="#007700">=&gt;</font><font color="#0000BB">1</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;while (list(</font><font color="#0000BB">$key</font><font color="#007700">,</font><font color="#0000BB">$val</font><font color="#007700">)=</font><font color="#0000BB">each</font><font color="#007700">(</font><font color="#0000BB">$_POST</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!</font><font color="#0000BB">$nonsettings</font><font color="#007700">[</font><font color="#0000BB">$key</font><font color="#007700">]) </font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">prefs</font><font color="#007700">][</font><font color="#0000BB">$key</font><font color="#007700">]=</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">$key</font><font color="#007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">email</font><font color="#007700">]!=</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">emailaddress</font><font color="#007700">]){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">is_email</font><font color="#007700">(</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">email</font><font color="#007700">])){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">getsetting</font><font color="#007700">(</font><font color="#DD0000">"requirevalidemail"</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">)==</font><font color="#0000BB">1</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`#Your email cannot be changed, system settings prohibit it.&nbsp;&nbsp;(Emails may only be changed if the server allows more than one account per email).&nbsp;&nbsp;Use the Petition link to ask the server administrator to change your email address if this one is no longer valid.`n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`#Your email address has been changed.`n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">emailaddress</font><font color="#007700">]=</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">email</font><font color="#007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">getsetting</font><font color="#007700">(</font><font color="#DD0000">"requireemail"</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">)==</font><font color="#0000BB">1</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`#That is not a valid email address.`n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`#Your email address has been changed.`n"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">emailaddress</font><font color="#007700">]=</font><font color="#0000BB">$_POST</font><font color="#007700">[</font><font color="#0000BB">email</font><font color="#007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"Settings Saved"</font><font color="#007700">);<br />}<br /></font><font color="#0000BB">page_footer</font><font color="#007700">();<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code>