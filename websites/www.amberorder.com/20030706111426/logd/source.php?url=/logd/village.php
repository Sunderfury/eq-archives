<h1>View Source: /logd/village.php</h1><a href='#source'>Click here for the source,</a> OR<br><b>Other files that you may wish to view the source of:</b><ul><li><a href='source.php?url=/logd/about.php'>about.php</a></li>
<li><a href='source.php?url=/logd/armor.php'>armor.php</a></li>
<li><a href='source.php?url=/logd/armoreditor.php'>armoreditor.php</a></li>
<li><a href='source.php?url=/logd/badnav.php'>badnav.php</a></li>
<li><a href='source.php?url=/logd/bank.php'>bank.php</a></li>
<li><a href='source.php?url=/logd/battle.php'>battle.php</a></li>
<li><a href='source.php?url=/logd/bio.php'>bio.php</a></li>
<li><a href='source.php?url=/logd/common.php'>common.php</a></li>
<li><a href='source.php?url=/logd/configuration.php'>configuration.php</a></li>
<li><a href='source.php?url=/logd/connector.php'>connector.php</a></li>
<li><a href='source.php?url=/logd/create.php'>create.php</a></li>
<li><a href='source.php?url=/logd/creatures.php'>creatures.php</a></li>
<li>dbconnect.php &#151; this file cannot be viewed: it contains sensitive information specific to this installation.</li>
<li><a href='source.php?url=/logd/dbwrapper.php'>dbwrapper.php</a></li>
<li><a href='source.php?url=/logd/donators.php'>donators.php</a></li>
<li>dragon.php &#151; this file cannot be viewed: If you want to read the dragon script, I suggest you do so by defeating it!</li>
<li><a href='source.php?url=/logd/forest.php'>forest.php</a></li>
<li><a href='source.php?url=/logd/graveyard.php'>graveyard.php</a></li>
<li><a href='source.php?url=/logd/gypsy.php'>gypsy.php</a></li>
<li><a href='source.php?url=/logd/healer.php'>healer.php</a></li>
<li><a href='source.php?url=/logd/hof.php'>hof.php</a></li>
<li><a href='source.php?url=/logd/index.php'>index.php</a></li>
<li><a href='source.php?url=/logd/inn.php'>inn.php</a></li>
<li><a href='source.php?url=/logd/list.php'>list.php</a></li>
<li><a href='source.php?url=/logd/logdnet.php'>logdnet.php</a></li>
<li><a href='source.php?url=/logd/login.php'>login.php</a></li>
<li><a href='source.php?url=/logd/mail.php'>mail.php</a></li>
<li><a href='source.php?url=/logd/motd.php'>motd.php</a></li>
<li><a href='source.php?url=/logd/newday.php'>newday.php</a></li>
<li><a href='source.php?url=/logd/news.php'>news.php</a></li>
<li><a href='source.php?url=/logd/petition.php'>petition.php</a></li>
<li><a href='source.php?url=/logd/prefs.php'>prefs.php</a></li>
<li><a href='source.php?url=/logd/pvp.php'>pvp.php</a></li>
<li><a href='source.php?url=/logd/referers.php'>referers.php</a></li>
<li><a href='source.php?url=/logd/shades.php'>shades.php</a></li>
<li><a href='source.php?url=/logd/source.php'>source.php</a></li>
<li><a href='source.php?url=/logd/stables.php'>stables.php</a></li>
<li><a href='source.php?url=/logd/stats.php'>stats.php</a></li>
<li><a href='source.php?url=/logd/superuser.php'>superuser.php</a></li>
<li><a href='source.php?url=/logd/taunt.php'>taunt.php</a></li>
<li><a href='source.php?url=/logd/train.php'>train.php</a></li>
<li><a href='source.php?url=/logd/translator.php'>translator.php</a></li>
<li><a href='source.php?url=/logd/translator_de.php'>translator_de.php</a></li>
<li><a href='source.php?url=/logd/translator_dk.php'>translator_dk.php</a></li>
<li><a href='source.php?url=/logd/translator_en.php'>translator_en.php</a></li>
<li><a href='source.php?url=/logd/translator_es.php'>translator_es.php</a></li>
<li><a href='source.php?url=/logd/translator_fr.php'>translator_fr.php</a></li>
<li><a href='source.php?url=/logd/user.php'>user.php</a></li>
<li><a href='source.php?url=/logd/viewpetition.php'>viewpetition.php</a></li>
<li><a href='source.php?url=/logd/village.php'>village.php</a></li>
<li><a href='source.php?url=/logd/weaponeditor.php'>weaponeditor.php</a></li>
<li><a href='source.php?url=/logd/weapons.php'>weapons.php</a></li>
<li><a href='source.php?url=/logd/special/audrey.php'>special/audrey.php</a></li>
<li><a href='source.php?url=/logd/special/darkhorse.php'>special/darkhorse.php</a></li>
<li><a href='source.php?url=/logd/special/distress.php'>special/distress.php</a></li>
<li><a href='source.php?url=/logd/special/fairy1.php'>special/fairy1.php</a></li>
<li><a href='source.php?url=/logd/special/findgem.php'>special/findgem.php</a></li>
<li><a href='source.php?url=/logd/special/findgold.php'>special/findgold.php</a></li>
<li><a href='source.php?url=/logd/special/glowingstream.php'>special/glowingstream.php</a></li>
<li><a href='source.php?url=/logd/special/grassyfield.php'>special/grassyfield.php</a></li>
<li><a href='source.php?url=/logd/special/oldmanbet.php'>special/oldmanbet.php</a></li>
<li><a href='source.php?url=/logd/special/oldmanpretty.php'>special/oldmanpretty.php</a></li>
<li><a href='source.php?url=/logd/special/oldmantown.php'>special/oldmantown.php</a></li>
<li><a href='source.php?url=/logd/special/oldmanugly.php'>special/oldmanugly.php</a></li>
<li><a href='source.php?url=/logd/special/riddles.php'>special/riddles.php</a></li>
<li><a href='source.php?url=/logd/special/skillmaster.php'>special/skillmaster.php</a></li>
</ul><h1><a name='source'>Source of: /logd/village.php</a></h1><code><font color="#000000">
<font color="#0000BB">&lt;?<br /></font><font color="#007700">require_once </font><font color="#DD0000">"common.php"</font><font color="#007700">;<br /></font><font color="#FF8000">/*<br />if ($session[user][superuser] &amp;&amp; $HTTP_GET_VARS[op]=="newday"){<br />&nbsp;&nbsp;&nbsp;&nbsp;//this is old code, but I'll leave it around in case I depend on it when I don't realize it.<br />&nbsp;&nbsp;$sql = "UPDATE accounts SET laston = '".date("Y-m-d H:i:s",strtotime("-1 day"))."'";<br />&nbsp;&nbsp;&nbsp;&nbsp;db_query($sql);<br />&nbsp;&nbsp;&nbsp;&nbsp;redirect("village.php");<br />}<br />*/<br /></font><font color="#0000BB">checkday</font><font color="#007700">();<br /><br />if (</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#DD0000">'user'</font><font color="#007700">][</font><font color="#DD0000">'alive'</font><font color="#007700">]){ }else{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">redirect</font><font color="#007700">(</font><font color="#DD0000">"shades.php"</font><font color="#007700">);<br />}<br />if (</font><font color="#0000BB">getsetting</font><font color="#007700">(</font><font color="#DD0000">"automaster"</font><font color="#007700">,</font><font color="#0000BB">1</font><font color="#007700">) &amp;&amp; </font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#DD0000">'user'</font><font color="#007700">][</font><font color="#DD0000">'seenmaster'</font><font color="#007700">]!=</font><font color="#0000BB">1</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$exparray</font><font color="#007700">=array(</font><font color="#0000BB">1</font><font color="#007700">=&gt;</font><font color="#0000BB">100</font><font color="#007700">,</font><font color="#0000BB">300</font><font color="#007700">,</font><font color="#0000BB">602</font><font color="#007700">,</font><font color="#0000BB">1012</font><font color="#007700">,</font><font color="#0000BB">1540</font><font color="#007700">,</font><font color="#0000BB">2207</font><font color="#007700">,</font><font color="#0000BB">3041</font><font color="#007700">,</font><font color="#0000BB">4085</font><font color="#007700">,</font><font color="#0000BB">5395</font><font color="#007700">,</font><font color="#0000BB">7043</font><font color="#007700">,</font><font color="#0000BB">9121</font><font color="#007700">,</font><font color="#0000BB">11740</font><font color="#007700">,</font><font color="#0000BB">15037</font><font color="#007700">,</font><font color="#0000BB">19171</font><font color="#007700">,</font><font color="#0000BB">24330</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">//$exparray[$key]=$val*2;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">while (list(</font><font color="#0000BB">$key</font><font color="#007700">,</font><font color="#0000BB">$val</font><font color="#007700">)=</font><font color="#0000BB">each</font><font color="#007700">(</font><font color="#0000BB">$exparray</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$exparray</font><font color="#007700">[</font><font color="#0000BB">$key</font><font color="#007700">]=</font><font color="#0000BB">$val </font><font color="#007700">+ (</font><font color="#0000BB">pow</font><font color="#007700">(</font><font color="#0000BB">$key</font><font color="#007700">-</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#0000BB">2</font><font color="#007700">)*</font><font color="#0000BB">100</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$expreqd </font><font color="#007700">= </font><font color="#0000BB">$exparray</font><font color="#007700">[</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#DD0000">'user'</font><font color="#007700">][</font><font color="#DD0000">'level'</font><font color="#007700">]] * </font><font color="#0000BB">2</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#DD0000">'user'</font><font color="#007700">][</font><font color="#DD0000">'experience'</font><font color="#007700">]&gt;</font><font color="#0000BB">$expreqd </font><font color="#007700">&amp;&amp; </font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#DD0000">'user'</font><font color="#007700">][</font><font color="#DD0000">'level'</font><font color="#007700">]&lt;</font><font color="#0000BB">15</font><font color="#007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">redirect</font><font color="#007700">(</font><font color="#DD0000">"train.php?op=autochallenge"</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"`bCombat`b"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Forest"</font><font color="#007700">,</font><font color="#DD0000">"forest.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Bluspring's Warrior Training"</font><font color="#007700">,</font><font color="#DD0000">"train.php"</font><font color="#007700">);<br />if (</font><font color="#0000BB">getsetting</font><font color="#007700">(</font><font color="#DD0000">"pvp"</font><font color="#007700">,</font><font color="#0000BB">1</font><font color="#007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Slay Other Players"</font><font color="#007700">,</font><font color="#DD0000">"pvp.php"</font><font color="#007700">);<br />}<br /><br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Commerce"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"MightyE's Weaponry"</font><font color="#007700">,</font><font color="#DD0000">"weapons.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Pegasus Armor"</font><font color="#007700">,</font><font color="#DD0000">"armor.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Ye Olde Bank"</font><font color="#007700">,</font><font color="#DD0000">"bank.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"T`5he Inn`0"</font><font color="#007700">,</font><font color="#DD0000">"inn.php"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Stables"</font><font color="#007700">,</font><font color="#DD0000">"stables.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Gypsy Tent"</font><font color="#007700">,</font><font color="#DD0000">"gypsy.php"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"`bOther`b"</font><font color="#007700">);<br /></font><font color="#FF8000">//$nav.="&lt;a class='nav' href='petition.php?op=faq' target='_blank' onClick=\"".popup("petition.php?op=faq")."; return false;\"&gt;".translate("F.A.Q. (newbies start here)")."&lt;br&gt;&lt;/a&gt;";<br /></font><font color="#0000BB">$nav</font><font color="#007700">.=</font><font color="#0000BB">templatereplace</font><font color="#007700">(</font><font color="#DD0000">"navitem"</font><font color="#007700">,array(</font><font color="#DD0000">"text"</font><font color="#007700">=&gt;</font><font color="#0000BB">translate</font><font color="#007700">(</font><font color="#DD0000">"F.A.Q. (newbies start here)"</font><font color="#007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"link"</font><font color="#007700">=&gt;</font><font color="#DD0000">"petition.php?op=faq\" target='_blank' onClick=\""</font><font color="#007700">.</font><font color="#0000BB">popup</font><font color="#007700">(</font><font color="#DD0000">"petition.php?op=faq"</font><font color="#007700">).</font><font color="#DD0000">"; return false;\""</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"accesskey"</font><font color="#007700">=&gt;</font><font color="#DD0000">""</font><font color="#007700">));<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Daily News"</font><font color="#007700">,</font><font color="#DD0000">"news.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Preferences"</font><font color="#007700">,</font><font color="#DD0000">"prefs.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"List Warriors"</font><font color="#007700">,</font><font color="#DD0000">"list.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"Hall of Fame"</font><font color="#007700">,</font><font color="#DD0000">"hof.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"`%Quit`0 to the fields"</font><font color="#007700">,</font><font color="#DD0000">"login.php?op=logout"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br /><br />if (</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">superuser</font><font color="#007700">]&gt;=</font><font color="#0000BB">2</font><font color="#007700">){<br />&nbsp;&nbsp;</font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"`bSuperuser Grotto`b"</font><font color="#007700">,</font><font color="#DD0000">"superuser.php"</font><font color="#007700">);<br />}<br /></font><font color="#FF8000">//let users try to cheat, we protect against this and will know if they try.<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#DD0000">"superuser.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#DD0000">"user.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#DD0000">"taunt.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#DD0000">"creatures.php"</font><font color="#007700">);<br /></font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">""</font><font color="#007700">,</font><font color="#DD0000">"configuration.php"</font><font color="#007700">);<br /><br />if (</font><font color="#0000BB">$session</font><font color="#007700">[</font><font color="#0000BB">user</font><font color="#007700">][</font><font color="#0000BB">superuser</font><font color="#007700">]){<br />&nbsp;&nbsp;</font><font color="#0000BB">addnav</font><font color="#007700">(</font><font color="#DD0000">"New Day"</font><font color="#007700">,</font><font color="#DD0000">"newday.php"</font><font color="#007700">);<br />}<br /><br /></font><font color="#0000BB">page_header</font><font color="#007700">(</font><font color="#DD0000">"Village Square"</font><font color="#007700">);<br /></font><font color="#FF8000">//output("&lt;img src='images/trans.gif' width='1' height='700' alt='' align='right'&gt;",true);<br /></font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`@`c`bVillage Square`b`cThe village hustles and bustles.&nbsp;&nbsp;No one really notices that you're standing there."</font><font color="#007700">);<br /></font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"&nbsp;&nbsp;You see various shops and businesses along main street.&nbsp;&nbsp;There is a curious looking rock to one side.&nbsp;&nbsp;"</font><font color="#007700">);<br /></font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"On every side the village is surrounded by deep dark forest.`n`n"</font><font color="#007700">);<br /></font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"The clock on the inn reads `^"</font><font color="#007700">.</font><font color="#0000BB">getgametime</font><font color="#007700">().</font><font color="#DD0000">"`@."</font><font color="#007700">);<br /><br /></font><font color="#FF8000">//&nbsp;&nbsp;&nbsp;&nbsp;$t1 = strtotime("now")*getsetting("daysperday",4);<br />//&nbsp;&nbsp;&nbsp;&nbsp;$t2 = strtotime($session[user][lasthit])*getsetting("daysperday",4);<br />//&nbsp;&nbsp;&nbsp;&nbsp;$d1 = date("Y-m-d",$t1);<br />//&nbsp;&nbsp;&nbsp;&nbsp;$d2 = date("Y-m-d",$t2);<br />//output("`n`nToday is $d1, your last new day was $d2");<br /><br /></font><font color="#0000BB">output</font><font color="#007700">(</font><font color="#DD0000">"`n`n`%`@Nearby some villagers talk:`n"</font><font color="#007700">);<br /></font><font color="#0000BB">commentary</font><font color="#007700">(</font><font color="#DD0000">"village"</font><font color="#007700">,</font><font color="#DD0000">"Add"</font><font color="#007700">,</font><font color="#0000BB">25</font><font color="#007700">);<br /></font><font color="#0000BB">page_footer</font><font color="#007700">();<br /></font><font color="#0000BB">?&gt;</font>
</font>
</code>