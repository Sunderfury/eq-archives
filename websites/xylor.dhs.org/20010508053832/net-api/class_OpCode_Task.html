<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpCode_Task class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>OpCode_Task  Class Reference</h1>OpCode Task Base Class. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="OpCode_Task_h-source.html">OpCode_Task.h</a>&gt;</code>
<p>
<p>Inheritance diagram for OpCode_Task::
<p><center><img src="class_OpCode_Task.gif" usemap="#OpCode_Task_map" border="0"></center>
<map name="OpCode_Task_map">
<area href="class_ACE_Task.html" alt="ACE_Task" shape="rect" coords="0,0,197,24">
</map>
<a href="class_OpCode_Task-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="el" href="OpCode_Task_h.html#a0">OpCode_Task_Base</a>&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#s0">inherited</a></td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#a0">OpCode_Task</a> (<a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a> *_stream, int threads=0)</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#a1">~OpCode_Task</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#a2">open</a> (<a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a> *_stream, int _threads=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em><a class="el" href="class_OpCode_Task.html#a2">open</a>() is invoked when the task is registered in the application.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#a3">close</a> (u_long flags)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Close the process.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#a4">put</a> (<a class="el" href="class_ACE_Message_Block.html">ACE_Message_Block</a> *message, ACE_Time_Value *timeout)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Put data into the task.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#a5">svc</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This is invoked as the starting point of each thread (if used).</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#a6">threads</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Accessor for threads_.</em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#b0">process</a> (<a class="el" href="class_ACE_Message_Block.html">ACE_Message_Block</a> *message, ACE_Time_Value *timeout)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Called by <a class="el" href="class_OpCode_Task.html#a4">put</a>() or <a class="el" href="class_OpCode_Task.html#a5">svc</a>() as necessary to process a block of data.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a>*&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#b1">stream</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Accessor function for stream_.</em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a>*&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#n0">stream_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Used to send back messages through the stream.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#n1">threads_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Keep track of how many threads are being run.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_OpCode_Task.html#n2">MLD</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Our memory leak detector.</em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
OpCode Task Base Class.
<p>
This class is the base class for all OpCode Tasks used at the application level. It allows the spawning of extra threads to help in the processing of the protocol if necessary. 
<p>
<hr><h2>Member Typedef Documentation</h2>
<a name="s0" doxytag="OpCode_Task::inherited"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
typedef <a class="el" href="OpCode_Task_h.html#a0">OpCode_Task_Base</a> OpCode_Task::inherited
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="OpCode_Task::OpCode_Task"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
OpCode_Task::OpCode_Task (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a> * <em>_stream</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>threads</em> = 0&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="OpCode_Task::~OpCode_Task"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
OpCode_Task::~OpCode_Task (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="OpCode_Task::close"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int OpCode_Task::close (
          </b></td>
          <td valign="bottom"><b>
u_long <em>flags</em>&nbsp;)<code> [virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Close the process.
<p>
<a class="el" href="class_OpCode_Task.html#a3">close</a>() is invoked when the registration task is closed (<em>flags</em> will be set to '1') and when the <a class="el" href="class_OpCode_Task.html#a5">svc</a>() method exits (<em>flags</em> will be '0').     </td>
  </tr>
</table>
<a name="a2" doxytag="OpCode_Task::open"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int OpCode_Task::open (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a> * <em>_stream</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>_threads</em> = 0&nbsp;)<code> [virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="class_OpCode_Task.html#a2">open</a>() is invoked when the task is registered in the application.
<p>
<em>threads</em> indicated the number of threads to spawn for this task.<ul>
<li>If <em>threads</em> == 0, then no threads will be spawns, and control of the thread calling the <b>put</b> method will be given to this task.<li>If <em>threads</em> != 0, then each spawned thread will start up in the <b>svc</b> function, and wait for messages to process. In this case, calling <b>put</b> will put the message into the message queue and return control to the caller. </ul>
    </td>
  </tr>
</table>
<a name="b0" doxytag="OpCode_Task::process"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int OpCode_Task::process (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_ACE_Message_Block.html">ACE_Message_Block</a> * <em>message</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
ACE_Time_Value * <em>timeout</em>&nbsp;)<code> [protected, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by <a class="el" href="class_OpCode_Task.html#a4">put</a>() or <a class="el" href="class_OpCode_Task.html#a5">svc</a>() as necessary to process a block of data.
<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="OpCode_Task::put"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int OpCode_Task::put (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="class_ACE_Message_Block.html">ACE_Message_Block</a> * <em>message</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
ACE_Time_Value * <em>timeout</em>&nbsp;)<code> [virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Put data into the task.
<p>
After data is routed through the registration task, the <b><a class="el" href="class_OpCode_Task.html#a4">put</a>()</b> method of the destination opcode task is invoked to process it. Depending on whether or not this task is multi-threaded, put will either add the message to the message queue or call <b>process</b> itself.     </td>
  </tr>
</table>
<a name="b1" doxytag="OpCode_Task::stream"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a> * OpCode_Task::stream (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)<code> [inline, protected]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Accessor function for stream_.
<p>
    </td>
  </tr>
</table>
<a name="a5" doxytag="OpCode_Task::svc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int OpCode_Task::svc (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)<code> [virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is invoked as the starting point of each thread (if used).
<p>
    </td>
  </tr>
</table>
<a name="a6" doxytag="OpCode_Task::threads"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int OpCode_Task::threads (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)<code> [inline, virtual]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Accessor for threads_.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="n2" doxytag="OpCode_Task::MLD"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
OpCode_Task::MLD<code> [protected]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Our memory leak detector.
<p>
    </td>
  </tr>
</table>
<a name="n0" doxytag="OpCode_Task::stream_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="class_Protocol_Stream.html">Protocol_Stream</a> * OpCode_Task::stream_<code> [protected]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used to send back messages through the stream.
<p>
    </td>
  </tr>
</table>
<a name="n1" doxytag="OpCode_Task::threads_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int OpCode_Task::threads_<code> [protected]</code>
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Keep track of how many threads are being run.
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="OpCode_Task_h-source.html">OpCode_Task.h</a></ul>
<hr><address><small>Generated at Sat Apr 28 02:43:52 2001 for OpenQuest Network API by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
