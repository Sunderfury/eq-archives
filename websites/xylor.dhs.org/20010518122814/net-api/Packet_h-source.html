<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Packet.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Packet.h</h1><a href="Packet_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          Packet.h  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Thu Mar 22 2001</font>
00005 <font class="comment">    copyright            : (C) 2001 by Xylor</font>
00006 <font class="comment">    email                : xylor@openquest.dhs.org</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="preprocessor">#ifndef PACKET_H</font>
00019 <font class="preprocessor"></font><font class="preprocessor">#define PACKET_H</font>
00020 <font class="preprocessor"></font>
00021 <font class="preprocessor">#include "<a class="code" href="mld_h.html">mld.h</a>"</font>
00022 <font class="preprocessor">#include "ace/Message_Block.h"</font>
00023 
00024 <font class="comment">// Forward declares.</font>
00025 <font class="keyword">class </font><a class="code" href="class_Peer.html">Peer</a>;
00026 
00027 <font class="comment">// Set the base type.</font>
<a name="l00028"></a><a class="code" href="Packet_h.html#a6">00028</a> <font class="keyword">typedef</font> <a class="code" href="class_ACE_Data_Block.html">ACE_Data_Block</a> <a class="code" href="class_ACE_Data_Block.html">Packet_Base</a>;
<a name="l00029"></a><a class="code" href="Packet_h.html#a7">00029</a> <font class="keyword">typedef</font> <a class="code" href="class_ACE_Message_Block.html">ACE_Message_Block</a> <a class="code" href="class_ACE_Message_Block.html">Message_Block_Base</a>;
00030 
00032 
<a name="l00041"></a><a class="code" href="Packet_h.html#a0">00041</a> <font class="preprocessor">#define MAX_HEADER_SIZE 2+2+2+2+6+2+2</font>
<a name="l00042"></a><a class="code" href="Packet_h.html#a1">00042</a> <font class="preprocessor"></font><font class="preprocessor">#define CRC_SIZE 4</font>
00043 <font class="preprocessor"></font>
<a name="l00044"></a><a class="code" href="Packet_h.html#a2">00044</a> <font class="preprocessor">#define rol(Value, bits)     Value = (Value &lt;&lt; bits | Value &gt;&gt; (32 - bits) )</font>
<a name="l00045"></a><a class="code" href="Packet_h.html#a3">00045</a> <font class="preprocessor"></font><font class="preprocessor">#define ror(Value, bits)     Value = (Value &gt;&gt; bits | Value &lt;&lt; (32 - bits) )</font>
<a name="l00046"></a><a class="code" href="Packet_h.html#a4">00046</a> <font class="preprocessor"></font><font class="preprocessor">#define roll(Value, bits)            (Value &lt;&lt; bits | Value &gt;&gt; (32 - bits) )</font>
<a name="l00047"></a><a class="code" href="Packet_h.html#a5">00047</a> <font class="preprocessor"></font><font class="preprocessor">#define rorl(Value, bits)            (Value &gt;&gt; bits | Value &lt;&lt; (32 - bits) )</font>
00048 <font class="preprocessor"></font>
<a name="l00050"></a><a class="code" href="struct_Packet_Header_Flags.html">00050</a> <font class="keyword">struct </font><a class="code" href="struct_Packet_Header_Flags.html">Packet_Header_Flags</a>
00051 {
00052     u_char
00053             a0_Unknown  :   1, 
<a name="l00054"></a><a class="code" href="struct_Packet_Header_Flags.html#m5">00054</a>             ARQ                 :   1, 
00055             a2_Closing  :   1, 
00056             Fragment        :   1, 
00057             ASQ                 :   1, 
00058             SEQStart        :   1, 
00059             a6_Closing  :   1, 
00060             SEQEnd          :   1; 
00061     
00062     u_char
00063             SpecARQ         :   1, 
<a name="l00064"></a><a class="code" href="struct_Packet_Header_Flags.html#m8">00064</a>             b1_Unknown  :   1, 
00065             ARSP                :   1, 
00066             b3_Unknown  :   1, 
00067             b4_Unknown  : 1, 
00068             b5_Unknown  : 1, 
00069             b6_Unknown  : 1, 
00070             b7_Unknown  : 1; 
00071 };
00072 
<a name="l00074"></a><a class="code" href="class_Fragment_Info.html">00074</a> <font class="keyword">class </font><a class="code" href="class_Fragment_Info.html">Fragment_Info</a>
00075 {
00076 <font class="keyword">public</font>:
<a name="l00077"></a><a class="code" href="class_Fragment_Info.html#a0">00077</a>     <a class="code" href="class_Fragment_Info.html#a0">Fragment_Info</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00078 <font class="keyword">    </font>{
00079         dwSEQ_ = 0;
00080         dwCurr_ = 0;
00081         dwTotal_ = 0;
00082     }
00083     
<a name="l00084"></a><a class="code" href="class_Fragment_Info.html#a1">00084</a>     ACE_UINT16 <a class="code" href="class_Fragment_Info.html#a1">dwSEQ</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00085 <font class="keyword">    </font>{
00086         <font class="keywordflow">return</font> this-&gt;dwSEQ_;
00087     }
00088     
<a name="l00089"></a><a class="code" href="class_Fragment_Info.html#a2">00089</a>     <font class="keywordtype">void</font> <a class="code" href="class_Fragment_Info.html#a1">dwSEQ</a>(ACE_UINT16 _dwSEQ)<font class="keyword"></font>
00090 <font class="keyword">    </font>{
00091         this-&gt;dwSEQ_ = _dwSEQ;
00092     }
00093     
<a name="l00094"></a><a class="code" href="class_Fragment_Info.html#a3">00094</a>     ACE_UINT16 <a class="code" href="class_Fragment_Info.html#a3">dwCurr</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00095 <font class="keyword">    </font>{
00096         <font class="keywordflow">return</font> this-&gt;dwCurr_;
00097     }
00098     
<a name="l00099"></a><a class="code" href="class_Fragment_Info.html#a4">00099</a>     <font class="keywordtype">void</font> <a class="code" href="class_Fragment_Info.html#a3">dwCurr</a>(ACE_UINT16 _dwCurr)<font class="keyword"></font>
00100 <font class="keyword">    </font>{
00101         this-&gt;dwCurr_ = _dwCurr;
00102     }
00103     
<a name="l00104"></a><a class="code" href="class_Fragment_Info.html#a5">00104</a>     ACE_UINT16 <a class="code" href="class_Fragment_Info.html#a5">dwTotal</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00105 <font class="keyword">    </font>{
00106         <font class="keywordflow">return</font> this-&gt;dwTotal_;
00107     }
00108     
<a name="l00109"></a><a class="code" href="class_Fragment_Info.html#a6">00109</a>     <font class="keywordtype">void</font> <a class="code" href="class_Fragment_Info.html#a5">dwTotal</a>(ACE_UINT16 _dwTotal)<font class="keyword"></font>
00110 <font class="keyword">    </font>{
00111         this-&gt;dwTotal_ = _dwTotal;
00112     }
00113     
00114 <font class="keyword">protected</font>:  
<a name="l00115"></a><a class="code" href="class_Fragment_Info.html#n0">00115</a>     ACE_UINT16 dwSEQ_;
<a name="l00116"></a><a class="code" href="class_Fragment_Info.html#n1">00116</a>     ACE_UINT16 dwCurr_;
<a name="l00117"></a><a class="code" href="class_Fragment_Info.html#n2">00117</a>     ACE_UINT16 dwTotal_;
00118     
<a name="l00119"></a><a class="code" href="class_Fragment_Info.html#n3">00119</a>     MLD;
00120 };
00121 
00122 
00124 
<a name="l00132"></a><a class="code" href="class_Packet.html">00132</a> <font class="keyword">class </font><a class="code" href="class_Packet.html">Packet</a> : <font class="keyword">public</font> <a class="code" href="class_ACE_Data_Block.html">ACE_Data_Block</a>
00133 {
00134 <font class="keyword">public</font>:
<a name="l00135"></a><a class="code" href="class_Packet.html#s0">00135</a>     <font class="keyword">typedef</font> <a class="code" href="class_ACE_Data_Block.html">Packet_Base</a> <a class="code" href="class_Protocol_Task.html">inherited</a>;
00136     
00138 
00141     <a class="code" href="class_Packet.html#a0">Packet</a> (<font class="keywordtype">char</font> *_data,
00142                     size_t _size,
00143                     <a class="code" href="class_Peer.html">Peer</a> *_peer);
00145     <a class="code" href="class_Packet.html#a1">~Packet</a>(<font class="keywordtype">void</font>);
00146     
<a name="l00148"></a><a class="code" href="class_Packet.html#a2">00148</a>     <a class="code" href="class_Peer.html">Peer</a> *<a class="code" href="class_Packet.html#a2">peer</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00149 <font class="keyword">    </font>{
00150         <font class="keywordflow">return</font> this-&gt;peer_;
00151     }
00152     
<a name="l00154"></a><a class="code" href="class_Packet.html#a3">00154</a>     ACE_UINT16 <a class="code" href="class_Packet.html#a3">dwSEQ</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00155 <font class="keyword">    </font>{
00156         <font class="keywordflow">return</font> this-&gt;dwSEQ_;
00157     }
00158     
<a name="l00160"></a><a class="code" href="class_Packet.html#a4">00160</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a3">dwSEQ</a>(ACE_UINT16 _dwSEQ)<font class="keyword"></font>
00161 <font class="keyword">    </font>{
00162         this-&gt;dwSEQ_ = _dwSEQ;
00163     }
00164     
<a name="l00166"></a><a class="code" href="class_Packet.html#a5">00166</a>     ACE_UINT16 <a class="code" href="class_Packet.html#a5">dwARSP</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00167 <font class="keyword">    </font>{
00168         <font class="keywordflow">return</font> this-&gt;dwARSP_;
00169     }
00170     
<a name="l00172"></a><a class="code" href="class_Packet.html#a6">00172</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a5">dwARSP</a>(ACE_UINT16 _dwARSP)<font class="keyword"></font>
00173 <font class="keyword">    </font>{
00174         this-&gt;dwARSP_ = _dwARSP;
00175     }
00176     
<a name="l00178"></a><a class="code" href="class_Packet.html#a7">00178</a>     ACE_UINT16 <a class="code" href="class_Packet.html#a7">dwARQ</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00179 <font class="keyword">    </font>{
00180         <font class="keywordflow">return</font> this-&gt;dwARQ_;
00181     }
00182     
<a name="l00184"></a><a class="code" href="class_Packet.html#a8">00184</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a7">dwARQ</a>(ACE_UINT16 _dwARQ)<font class="keyword"></font>
00185 <font class="keyword">    </font>{
00186         this-&gt;dwARQ_ = _dwARQ;
00187     }
00188     
<a name="l00190"></a><a class="code" href="class_Packet.html#a9">00190</a>     u_char <a class="code" href="class_Packet.html#a9">dbASQ_high</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00191 <font class="keyword">    </font>{
00192         <font class="keywordflow">return</font> this-&gt;dbASQ_high_;
00193     }
00194     
<a name="l00196"></a><a class="code" href="class_Packet.html#a10">00196</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a9">dbASQ_high</a>(u_char _dbASQ_high)<font class="keyword"></font>
00197 <font class="keyword">    </font>{
00198         this-&gt;dbASQ_high_ = _dbASQ_high;
00199     }
00200     
<a name="l00202"></a><a class="code" href="class_Packet.html#a11">00202</a>     u_char <a class="code" href="class_Packet.html#a11">dbASQ_low</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00203 <font class="keyword">    </font>{
00204         <font class="keywordflow">return</font> this-&gt;dbASQ_low_;
00205     }
00206     
<a name="l00208"></a><a class="code" href="class_Packet.html#a12">00208</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a11">dbASQ_low</a>(u_char _dbASQ_low)<font class="keyword"></font>
00209 <font class="keyword">    </font>{
00210         this-&gt;dbASQ_low_ = _dbASQ_low;
00211     }
00212         
<a name="l00214"></a><a class="code" href="class_Packet.html#a13">00214</a>     ACE_UINT16 <a class="code" href="class_Packet.html#a13">dwOpCode</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00215 <font class="keyword">    </font>{
00216         <font class="keywordflow">return</font> this-&gt;dwOpCode_;
00217     }
00218     
<a name="l00220"></a><a class="code" href="class_Packet.html#a14">00220</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a13">dwOpCode</a>(ACE_UINT16 _dwOpCode)<font class="keyword"></font>
00221 <font class="keyword">    </font>{
00222         this-&gt;dwOpCode_ = _dwOpCode;
00223     }
00224     
<a name="l00226"></a><a class="code" href="class_Packet.html#a15">00226</a>     <a class="code" href="struct_Packet_Header_Flags.html">Packet_Header_Flags</a> <a class="code" href="class_Packet.html#a15">flags</a>(<font class="keywordtype">void</font>)<font class="keyword"> const</font>
00227 <font class="keyword">    </font>{
00228         <font class="keywordflow">return</font> this-&gt;flags_;
00229     }
00230         
<a name="l00232"></a><a class="code" href="class_Packet.html#a16">00232</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a15">flags</a>(ACE_UINT16 _flags)<font class="keyword"></font>
00233 <font class="keyword">    </font>{
00234         this-&gt;flags_ = *( (<a class="code" href="struct_Packet_Header_Flags.html">Packet_Header_Flags</a> *)&amp;_flags );
00235     }
00236     
<a name="l00238"></a><a class="code" href="class_Packet.html#a17">00238</a>     <a class="code" href="class_Fragment_Info.html">Fragment_Info</a> *<a class="code" href="class_Packet.html#a17">frag_info</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00239 <font class="keyword">    </font>{
00240         <font class="keywordflow">return</font> &amp;(this-&gt;frag_info_);
00241     }
00242     
<a name="l00244"></a><a class="code" href="class_Packet.html#a18">00244</a>     ACE_UINT32 <a class="code" href="class_Packet.html#a18">CRC</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00245 <font class="keyword">    </font>{
00246         <font class="keywordflow">return</font> this-&gt;CRC_;
00247     }
00248     
<a name="l00250"></a><a class="code" href="class_Packet.html#a19">00250</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a18">CRC</a>(ACE_UINT32 _CRC)<font class="keyword"></font>
00251 <font class="keyword">    </font>{
00252         this-&gt;CRC_ = _CRC;
00253     }
00254         
00256     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a20">dump</a>(<font class="keywordtype">void</font>);
00257 
00259     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a21">dump_data</a>(<font class="keywordtype">int</font> direction=1);
00260     
<a name="l00262"></a><a class="code" href="class_Packet.html#a22">00262</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a22">a2_Closing</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00263 <font class="keyword">    </font>{
00264         <font class="keywordflow">return</font> this-&gt;flags_.a2_Closing;
00265     }
00266     
<a name="l00268"></a><a class="code" href="class_Packet.html#a23">00268</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a22">a2_Closing</a>(<font class="keywordtype">int</font> _a2_Closing)<font class="keyword"></font>
00269 <font class="keyword">    </font>{
00270         this-&gt;flags_.a2_Closing = _a2_Closing;
00271     }
00272 
<a name="l00274"></a><a class="code" href="class_Packet.html#a24">00274</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a24">Fragment</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00275 <font class="keyword">    </font>{
00276         <font class="keywordflow">return</font> this-&gt;flags_.Fragment;
00277     }
00278     
<a name="l00280"></a><a class="code" href="class_Packet.html#a25">00280</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a24">Fragment</a>(<font class="keywordtype">int</font> _Fragment)<font class="keyword"></font>
00281 <font class="keyword">    </font>{
00282         this-&gt;flags_.Fragment = _Fragment;
00283     }
00284 
<a name="l00286"></a><a class="code" href="class_Packet.html#a26">00286</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a26">ASQ</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00287 <font class="keyword">    </font>{
00288         <font class="keywordflow">return</font> this-&gt;flags_.ASQ;
00289     }
00290     
<a name="l00292"></a><a class="code" href="class_Packet.html#a27">00292</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a26">ASQ</a>(<font class="keywordtype">int</font> _ASQ)<font class="keyword"></font>
00293 <font class="keyword">    </font>{
00294         this-&gt;flags_.ASQ = _ASQ;
00295     }
00296 
<a name="l00298"></a><a class="code" href="class_Packet.html#a28">00298</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a28">SEQStart</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00299 <font class="keyword">    </font>{
00300         <font class="keywordflow">return</font> this-&gt;flags_.SEQStart;
00301     }
00302     
<a name="l00304"></a><a class="code" href="class_Packet.html#a29">00304</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a28">SEQStart</a>(<font class="keywordtype">int</font> _SEQStart)<font class="keyword"></font>
00305 <font class="keyword">    </font>{
00306         this-&gt;flags_.SEQStart = _SEQStart;
00307     }
00308 
<a name="l00310"></a><a class="code" href="class_Packet.html#a30">00310</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a30">a6_Closing</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00311 <font class="keyword">    </font>{
00312         <font class="keywordflow">return</font> this-&gt;flags_.a6_Closing;
00313     }
00314     
<a name="l00316"></a><a class="code" href="class_Packet.html#a31">00316</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a30">a6_Closing</a>(<font class="keywordtype">int</font> _a6_Closing)<font class="keyword"></font>
00317 <font class="keyword">    </font>{
00318         this-&gt;flags_.a6_Closing = _a6_Closing;
00319     }
00320 
<a name="l00322"></a><a class="code" href="class_Packet.html#a32">00322</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a32">SEQEnd</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00323 <font class="keyword">    </font>{
00324         <font class="keywordflow">return</font> this-&gt;flags_.SEQEnd;
00325     }
00326     
<a name="l00328"></a><a class="code" href="class_Packet.html#a33">00328</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a32">SEQEnd</a>(<font class="keywordtype">int</font> _SEQEnd)<font class="keyword"></font>
00329 <font class="keyword">    </font>{
00330         this-&gt;flags_.SEQEnd = _SEQEnd;
00331     }
00332 
<a name="l00334"></a><a class="code" href="class_Packet.html#a34">00334</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a34">SpecARQ</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00335 <font class="keyword">    </font>{
00336         <font class="keywordflow">return</font> this-&gt;flags_.SpecARQ;
00337     }
00338     
<a name="l00340"></a><a class="code" href="class_Packet.html#a35">00340</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a34">SpecARQ</a>(<font class="keywordtype">int</font> _SpecARQ)<font class="keyword"></font>
00341 <font class="keyword">    </font>{
00342         this-&gt;flags_.SpecARQ = _SpecARQ;
00343     }
00344 
<a name="l00346"></a><a class="code" href="class_Packet.html#a36">00346</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a36">ARSP</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00347 <font class="keyword">    </font>{
00348         <font class="keywordflow">return</font> this-&gt;flags_.ARSP;
00349     }
00350     
<a name="l00352"></a><a class="code" href="class_Packet.html#a37">00352</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a36">ARSP</a>(<font class="keywordtype">int</font> _ARSP)<font class="keyword"></font>
00353 <font class="keyword">    </font>{
00354         this-&gt;flags_.ARSP = _ARSP;
00355     }
00356             
<a name="l00358"></a><a class="code" href="class_Packet.html#a38">00358</a>     <font class="keywordtype">int</font> <a class="code" href="class_Packet.html#a38">ARQ</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00359 <font class="keyword">    </font>{
00360         <font class="keywordflow">return</font> this-&gt;flags_.ARQ;
00361     }
00362     
<a name="l00364"></a><a class="code" href="class_Packet.html#a39">00364</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a38">ARQ</a>(<font class="keywordtype">int</font> _ARQ)<font class="keyword"></font>
00365 <font class="keyword">    </font>{
00366         this-&gt;flags_.ARQ = _ARQ;
00367     }
00368 
<a name="l00370"></a><a class="code" href="class_Packet.html#a40">00370</a>     <font class="keywordtype">long</font> <a class="code" href="class_Packet.html#a40">resend_timer_id</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00371 <font class="keyword">    </font>{
00372         <font class="keywordflow">return</font> this-&gt;resend_timer_id_;
00373     }
00374     
<a name="l00376"></a><a class="code" href="class_Packet.html#a41">00376</a>     <font class="keywordtype">void</font> <a class="code" href="class_Packet.html#a40">resend_timer_id</a>(<font class="keywordtype">long</font> _resend_timer_id)<font class="keyword"></font>
00377 <font class="keyword">    </font>{
00378         this-&gt;resend_timer_id_ = _resend_timer_id;
00379     }
00380         
00381 <font class="keyword">protected</font>:
<a name="l00382"></a><a class="code" href="class_Packet.html#n0">00382</a>     <font class="keywordtype">char</font> *data_;
<a name="l00383"></a><a class="code" href="class_Packet.html#n1">00383</a>     <a class="code" href="class_Peer.html">Peer</a> *peer_;
00384                 
<a name="l00386"></a><a class="code" href="class_Packet.html#n2">00386</a>     <a class="code" href="struct_Packet_Header_Flags.html">Packet_Header_Flags</a> flags_;
<a name="l00387"></a><a class="code" href="class_Packet.html#n3">00387</a>     ACE_UINT16              dwSEQ_;     
<a name="l00388"></a><a class="code" href="class_Packet.html#n4">00388</a>     ACE_UINT16              dwARSP_;
<a name="l00389"></a><a class="code" href="class_Packet.html#n5">00389</a>     ACE_UINT16              dwARQ_;
<a name="l00390"></a><a class="code" href="class_Packet.html#n7">00390</a>     ACE_UINT16              dbASQ_high_ : 8,
00391                                         dbASQ_low_  : 8;
00392 
<a name="l00393"></a><a class="code" href="class_Packet.html#n8">00393</a>     ACE_UINT16              dwOpCode_;  
00394 
<a name="l00395"></a><a class="code" href="class_Packet.html#n9">00395</a>     <a class="code" href="class_Fragment_Info.html">Fragment_Info</a>           frag_info_;     
00396 
<a name="l00397"></a><a class="code" href="class_Packet.html#n10">00397</a>     ACE_UINT32              CRC_;           
00398         
<a name="l00399"></a><a class="code" href="class_Packet.html#n11">00399</a>     <font class="keywordtype">long</font> resend_timer_id_;          
00400     
<a name="l00402"></a><a class="code" href="class_Packet.html#n12">00402</a>     MLD;
00403     
00405 
<a name="l00411"></a><a class="code" href="class_Packet__Lock.html">00411</a>     <font class="keyword">class </font>Lock : <font class="keyword">public</font> <a class="code" href="class_ACE_Lock_Adapter.html">ACE_Lock_Adapter</a> &lt; ACE_Mutex &gt;
00412     {
00413     <font class="keyword">public</font>:
<a name="l00414"></a><a class="code" href="class_Packet__Lock.html#s0">00414</a>         <font class="keyword">typedef</font> ACE_Lock_Adapter &lt; ACE_Mutex &gt; <a class="code" href="class_Protocol_Task.html">inherited</a>;
00415 
00416         <a class="code" href="class_Packet__Lock.html#a0">Lock</a> (<font class="keywordtype">void</font>);
00417         <a class="code" href="class_Packet__Lock.html#a1">~Lock</a> (<font class="keywordtype">void</font>);
00418 
00420 
00424         <font class="keywordtype">int</font> <a class="code" href="class_Packet__Lock.html#a2">destroy</a> (<font class="keywordtype">void</font>);
00425 
00426     <font class="keyword">protected</font>:
<a name="l00428"></a><a class="code" href="class_Packet__Lock.html#n0">00428</a>         MLD;
00429     };
00430     
00431 };
00432 
00433 <font class="comment">// Message_Block will be used to pass packet data around.</font>
<a name="l00437"></a><a class="code" href="class_Message_Block.html">00437</a> <font class="comment"></font><font class="keyword">class </font><a class="code" href="class_Message_Block.html">Message_Block</a> : <font class="keyword">public</font> <a class="code" href="class_ACE_Message_Block.html">ACE_Message_Block</a>
00438 {
00439 <font class="keyword">public</font>:
<a name="l00440"></a><a class="code" href="class_Message_Block.html#s0">00440</a>     <font class="keyword">typedef</font> <a class="code" href="class_ACE_Message_Block.html">Message_Block_Base</a> <a class="code" href="class_Protocol_Task.html">inherited</a>;
00441 
00443     <a class="code" href="class_Message_Block.html#a0">Message_Block</a> (<font class="keywordtype">void</font>);
00444 
00446         <a class="code" href="class_Message_Block.html#a0">Message_Block</a> ( <font class="keywordtype">char</font> *_data,
00447                                         size_t _size,
00448                                         <a class="code" href="class_Peer.html">Peer</a> *_peer );
00449 
00451         <a class="code" href="class_Message_Block.html#a0">Message_Block</a> ( size_t _size,
00452                                         ACE_UINT32 _opcode,
00453                                         <a class="code" href="class_Peer.html">Peer</a> *_peer );
00454 
00455     <a class="code" href="class_Message_Block.html#a3">~Message_Block</a> (<font class="keywordtype">void</font>);
00456 
<a name="l00458"></a><a class="code" href="class_Message_Block.html#a4">00458</a>         <a class="code" href="class_Peer.html">Peer</a> *<a class="code" href="class_Message_Block.html#a4">peer</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00459 <font class="keyword">        </font>{
00460             <font class="keywordflow">return</font> ((<a class="code" href="class_Packet.html">Packet</a> *)this-&gt;data_block())-&gt;peer();
00461         }
00462         
<a name="l00463"></a><a class="code" href="class_Message_Block.html#a5">00463</a>         <a class="code" href="class_Packet.html">Packet</a> *<a class="code" href="class_Message_Block.html#a5">packet</a>(<font class="keywordtype">void</font>)<font class="keyword"></font>
00464 <font class="keyword">        </font>{
00465             <font class="keywordflow">return</font> (<a class="code" href="class_Packet.html">Packet</a> *)this-&gt;data_block();
00466         }
00467 
00468 <font class="keyword">protected</font>:
<a name="l00469"></a><a class="code" href="class_Message_Block.html#n0">00469</a>     MLD;
00470 };
00471 
00472 <font class="preprocessor">#endif </font><font class="comment">/* PACKET_H */</font>
00473 
</pre></div><hr><address><small>Generated at Sat Apr 28 02:43:51 2001 for OpenQuest Network API by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
