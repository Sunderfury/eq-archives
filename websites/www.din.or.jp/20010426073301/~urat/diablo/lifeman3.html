<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
   <META NAME="Author" CONTENT="Tao">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.06 [ja] (Win95; I) [Netscape]">
   <TITLE>lifeman</TITLE>
</HEAD>
<BODY TEXT="#CCCCCC" BGCOLOR="#000066" LINK="#FFFF00" VLINK="#8080FF" ALINK="#FF00FF">
<FONT COLOR="#FFFFFF"></FONT>&nbsp;
<H2>
<FONT COLOR="#FFFFFF">[RogueのManaの秘密]</FONT></H2>

<P><BR>えー、この記事は、<B><FONT COLOR="#FFFFFF">[ManaShieldの(Damage)低減効果]</FONT></B>を熟読理解してないと、頭に入りません。
<BR>あの記事自体がけっこうわかりにくいですが・・・・・（汗）
<BR>また、この記事では、<B><FONT COLOR="#FFFFFF">[Life&amp;Manaの詳細]</FONT></B>に書かれた<B><FONT COLOR="#FFFFFF">[最小単位1/64の仮説]</FONT></B>を、証明済みとしています。
<P>では本題です。
<BR>&nbsp;
<H3>
<FONT COLOR="#FFCC00">RogueのManaの実際を測定する実験</FONT></H3>
元JPN-NIF所属（とご本人談）の、かかしさんの指摘により、<B><FONT COLOR="#FFFFFF">RogueのManaのみ最大値が整数になっていないのでは？</FONT></B>
という疑問が出ましたので、確認のために実験をしました。例によって、MSを張ったキャラを殴ります。
<P>裸の状態の<B><FONT COLOR="#FFFFFF">LV30R（Status表示Mana135）</FONT></B>を、<B><FONT COLOR="#FFFFFF">LV4のS（2-2Damageと4-4Damage）</FONT></B>で殴ったデータ。
<P><B><FONT COLOR="#FFFFFF">実験2-2</FONT></B>
<TABLE BORDER >
<TR>
<TD>135</TD>

<TD>134(1)</TD>

<TD>132<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>131(1)</TD>

<TD>130(1)</TD>

<TD>128<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>127(1)</TD>

<TD>126(1)</TD>

<TD>124<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>123(1)</TD>
</TR>

<TR>
<TD>122(1)</TD>

<TD>120<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>119(1)</TD>

<TD>118(1)</TD>

<TD>116<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>115(1)</TD>

<TD>114(1)</TD>

<TD>112<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>111(1)</TD>

<TD>109<FONT COLOR="#FFFF00">(2)</FONT></TD>
</TR>

<TR>
<TD>108(1)</TD>

<TD>107(1)</TD>

<TD>105<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>104(1)</TD>

<TD>103(1)</TD>

<TD>101<FONT COLOR="#FFFF00">(2)</FONT></TD>

<TD>100(1)</TD>

<TD></TD>

<TD></TD>

<TD></TD>
</TR>
</TABLE>

<P>見ればわかりますが、Mana114からの一連のManaの減少パターンが、<B><FONT COLOR="#FFFFFF">[MSの低減効果]</FONT></B>の実験で、W（Manaの最大値が整数値と推定される）を殴った時の初回からの<B><FONT COLOR="#FFFFFF">例外パターン</FONT></B>と同じになっています。
<BR><B><FONT COLOR="#FFFFFF">114-(</FONT><FONT COLOR="#FFFF00">2</FONT><FONT COLOR="#FFFFFF">)-112-(</FONT><FONT COLOR="#FFFF00">1</FONT><FONT COLOR="#FFFFFF">)-111-(</FONT><FONT COLOR="#FFFF00">2</FONT><FONT COLOR="#FFFFFF">)-109</FONT></B>
ね。
<P><B><FONT COLOR="#FFFFFF">実験4-4</FONT></B>
<TABLE BORDER >
<TR>
<TD>135</TD>

<TD>132<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>130(2)</TD>

<TD>127<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>124<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>122(2)</TD>

<TD>119<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>116<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>114(2)</TD>

<TD>111<FONT COLOR="#FFFF00">(3)</FONT></TD>
</TR>

<TR>
<TD>108<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>106(2)</TD>

<TD>103<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>100<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>98(2)</TD>

<TD>95<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>92<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>90(2)</TD>

<TD>87<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>84<FONT COLOR="#FFFF00">(3)</FONT></TD>
</TR>

<TR>
<TD>82(2)</TD>

<TD>79<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>76<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>74(2)</TD>

<TD>71<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>68<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>66(2)</TD>

<TD>63<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>60<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>58(2)</TD>
</TR>

<TR>
<TD>55<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>52<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>50(2)</TD>

<TD>47<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>44<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>41<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>39(2)</TD>

<TD>36<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>33<FONT COLOR="#FFFF00">(3)</FONT></TD>

<TD>31(2)</TD>
</TR>
</TABLE>

<P>こちらも同じ。Mana50から始まる一連の流れが、W殴りのスタート時点と同じ、<B><FONT COLOR="#FFFFFF">例外パターン</FONT></B>になっています。
<BR><B><FONT COLOR="#FFFFFF">50-(</FONT><FONT COLOR="#FFFF00">3</FONT><FONT COLOR="#FFFFFF">)-47-(</FONT><FONT COLOR="#FFFF00">3</FONT><FONT COLOR="#FFFFFF">)-44-(</FONT><FONT COLOR="#FFFF00">3</FONT><FONT COLOR="#FFFFFF">)-41-(</FONT><FONT COLOR="#FFFF00">2</FONT><FONT COLOR="#FFFFFF">)-39</FONT></B>。
<P>Manaの最小単位が1/64の時（<B><FONT COLOR="#FFFFFF">[ManaShieldの低減効果]</FONT></B>で、証明済みとします）、このパターンを描くのは、最小単位が0/64、つまり、Manaが整数値となった地点からに限定されます。
<BR>つまり、<B><FONT COLOR="#FFFFFF">実験2-2</FONT></B>では、Mana114表示の時、<B><FONT COLOR="#FFFFFF">実験4-4</FONT></B>ではMana50表示の時に、<B><FONT COLOR="#FFFFFF">Manaが整数値になっている</FONT></B>と考えられます。
<P>そこで、殴られた時の1/64単位の推移を見るテーブルを作ってみました。
<P><B><FONT COLOR="#FFCC00">2-2の小数点以下数値の推移テーブル（単位1/64）</FONT></B>
<TABLE BORDER >
<TR>
<TD>0</TD>

<TD>42</TD>

<TD>20</TD>

<TD>62</TD>

<TD>40</TD>

<TD>18</TD>

<TD>60</TD>

<TD>38</TD>

<TD>16</TD>

<TD>58</TD>
</TR>

<TR>
<TD>36</TD>

<TD>14</TD>

<TD>56</TD>

<TD>34</TD>

<TD>12</TD>

<TD>54</TD>

<TD>32</TD>

<TD>10</TD>

<TD>52</TD>

<TD>30</TD>
</TR>

<TR>
<TD>8</TD>

<TD>50</TD>

<TD>28</TD>

<TD>6</TD>

<TD>48</TD>

<TD>26</TD>

<TD>4</TD>

<TD>46</TD>

<TD>24</TD>

<TD>2</TD>
</TR>

<TR>
<TD>44</TD>

<TD>22</TD>

<TD><FONT COLOR="#FFFF00">0</FONT></TD>

<TD>42</TD>

<TD></TD>

<TD></TD>

<TD></TD>

<TD></TD>

<TD></TD>

<TD></TD>
</TR>
</TABLE>
32回でループ
<P><B><FONT COLOR="#FFCC00">4-4の小数点以下数値の推移テーブル（単位1/64）</FONT></B>
<TABLE BORDER >
<TR>
<TD>0</TD>

<TD>21</TD>

<TD>42</TD>

<TD>63</TD>

<TD>20</TD>

<TD>41</TD>

<TD>62</TD>

<TD>19</TD>

<TD>40</TD>

<TD>61</TD>
</TR>

<TR>
<TD>18</TD>

<TD>39</TD>

<TD>60</TD>

<TD>17</TD>

<TD>38</TD>

<TD>59</TD>

<TD>16</TD>

<TD>37</TD>

<TD>58</TD>

<TD>15</TD>
</TR>

<TR>
<TD>36</TD>

<TD>57</TD>

<TD>14</TD>

<TD>35</TD>

<TD>56</TD>

<TD>13</TD>

<TD>34</TD>

<TD>55</TD>

<TD>12</TD>

<TD>33</TD>
</TR>

<TR>
<TD>54</TD>

<TD>11</TD>

<TD>32</TD>

<TD>53</TD>

<TD>10</TD>

<TD>31</TD>

<TD>52</TD>

<TD>9</TD>

<TD>30</TD>

<TD>51</TD>
</TR>

<TR>
<TD>8</TD>

<TD>29</TD>

<TD>50</TD>

<TD>7</TD>

<TD>28</TD>

<TD>49</TD>

<TD>6</TD>

<TD>27</TD>

<TD>48</TD>

<TD>5</TD>
</TR>

<TR>
<TD>26</TD>

<TD>47</TD>

<TD>4</TD>

<TD>25</TD>

<TD>46</TD>

<TD>3</TD>

<TD>24</TD>

<TD>45</TD>

<TD>2</TD>

<TD>23</TD>
</TR>

<TR>
<TD>44</TD>

<TD>1</TD>

<TD>22</TD>

<TD>43</TD>

<TD><FONT COLOR="#FFFF00">0</FONT></TD>

<TD>21</TD>

<TD>42</TD>

<TD></TD>

<TD></TD>

<TD></TD>
</TR>
</TABLE>
64回でループ
<P>共に、整数値の状態のManaに対して、上が22/64、下が43/64のDamageを加え続けた状態のテーブルです。
<BR>黄色の0のところに114と50を当てはめて、後は135のありかをたどって下から登っていきます。
<BR>・・・・・スタート地点の<B><FONT COLOR="#FFFFFF">Mana135が、どちらも測ったように、同じ32を指している</FONT></B>のがわかりますね？
<P>つまり、<B><FONT COLOR="#FFFF00">RogueのManaは、最大値の状態で32/64の端数を持っている</FONT></B>わけです。
<BR>別の条件で（LV50R)で、かかしさんが同様の結果を出していますので、これは一般的に適用可能と考えます。
<P>RogueのManaは、以前の式では
<P><B><FONT COLOR="#FFFFFF">(LV-1)*2+Mag+(ItemMag*1.5)+7 （ただし、小数点以下は切り捨て）</FONT></B>
<P>と考えられていました（うちのサイトのBasicsもそう表記してます）が、正確には、
<P><B><FONT COLOR="#FFCC00"><FONT SIZE=+1>(LV-1)*2+Mag+INT(ItemMag*1.5)+7<U>+32/64</U></FONT></FONT></B>
<BR><B><FONT COLOR="#FFFFFF">（INTは小数点以下を切り捨ての意）</FONT></B>
<P>ということになるわけですね。（+7.5と覚えて正解です）
<BR>なお、<B><FONT COLOR="#FFFFFF">ItemMagのところは、その計算の時点で切り捨てして下さい</FONT></B>。でないと、奇数の時にえらいことになります（笑）
<P>Rogue、ちょっとお得な気分？（笑）
<BR>&nbsp;
<BR>&nbsp;
<BR>&nbsp;
<P>[最終更新 98年12月18日]
<BR>&nbsp;
<BR>&nbsp;
<P>いつかどこかのDuel日記に・・・ <B><FONT COLOR="#FFFFFF">「RogueのMana0.5ボーナスのおかげで生き残った！」</FONT></B>なんて表記出ないかな？（出ない出ない）
<BR>&nbsp;
<BR>&nbsp;
</BODY>
</HTML>
